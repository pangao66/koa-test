{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { createServer } from 'http'\nimport { Configuration, OpenAIApi } from 'openai-edge'\nimport { OpenAIStream, streamToResponse } from 'ai'\nexport const runtime = 'edge'\nexport const config = {\n  supportsResponseStreaming: true,\n}\nconst OpenAIConfig = new Configuration({\n  apiKey: process.env.OPENAI_API_KEY\n})\nconst openai = new OpenAIApi(OpenAIConfig)\n\nconst server = createServer(async (req, res) => {\n  const aiResponse = await openai.createChatCompletion({\n    model: 'gpt-3.5-turbo-16k-0613',\n    stream: true,\n    messages: [{ role: 'user', content: 'What is love?' }]\n  })\n\n  // Transform the response into a readable stream\n  const stream = OpenAIStream(aiResponse)\n\n  // Pipe the stream to the response\n  streamToResponse(stream, res)\n})\n\nserver.listen(3000)\n"],"mappings":";AAAA,SAAS,oBAAoB;AAC7B,SAAS,eAAe,iBAAiB;AACzC,SAAS,cAAc,wBAAwB;AACxC,IAAM,UAAU;AAChB,IAAM,SAAS;AAAA,EACpB,2BAA2B;AAC7B;AACA,IAAM,eAAe,IAAI,cAAc;AAAA,EACrC,QAAQ,QAAQ,IAAI;AACtB,CAAC;AACD,IAAM,SAAS,IAAI,UAAU,YAAY;AAEzC,IAAM,SAAS,aAAa,OAAO,KAAK,QAAQ;AAC9C,QAAM,aAAa,MAAM,OAAO,qBAAqB;AAAA,IACnD,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,UAAU,CAAC,EAAE,MAAM,QAAQ,SAAS,gBAAgB,CAAC;AAAA,EACvD,CAAC;AAGD,QAAM,SAAS,aAAa,UAAU;AAGtC,mBAAiB,QAAQ,GAAG;AAC9B,CAAC;AAED,OAAO,OAAO,GAAI;","names":[]}